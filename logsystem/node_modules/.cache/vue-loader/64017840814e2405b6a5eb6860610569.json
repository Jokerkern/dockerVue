{"remainingRequest":"/home/p/logsystem/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/p/logsystem/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/p/logsystem/src/views/Home.vue","mtime":1641366438237},{"path":"/home/p/logsystem/node_modules/cache-loader/dist/cjs.js","mtime":1641372091064},{"path":"/home/p/logsystem/node_modules/babel-loader/lib/index.js","mtime":1641372092024},{"path":"/home/p/logsystem/node_modules/cache-loader/dist/cjs.js","mtime":1641372091064},{"path":"/home/p/logsystem/node_modules/vue-loader/lib/index.js","mtime":1641372092460}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTaWRlTWVudSBmcm9tICIuL1NpZGVNZW51LnZ1ZSI7IC8vICAxLuW8leWFpeW3puS+p+iPnOWNlee7hOS7tgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImhvbWUiLAogIGNvbXBvbmVudHM6IHsKICAgIFNpZGVNZW51LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVkaXRhYmxlVGFic1ZhbHVlOiAiMCIsCiAgICAgIGVkaXRhYmxlVGFiczogW10sCiAgICAgIHRhYkluZGV4OiAwLAogICAgICBsb2dBcnI6IFtdLAogICAgICBjb250ZW50OiBbXSwKICAgICAgdGltZXI6ICIiLAogICAgICBwYWdlc2l6ZTogMTAsIC8vICAgIOavj+mhteeahOaVsOaNrgogICAgICBzZWFyY2g6ICIiLAogICAgICBpbnB1dDogIiIsCiAgICAgIHZhbHVlMTogIiIsCiAgICAgIGlzQ29ubmVjdGVkOiB0cnVlLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgdGhhdCA9IHRoaXM7CiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICBsZXQgbG9nID0gdGhhdC4kc3RvcmUuc3RhdGUubG9nOwogICAgICAvL2NvbnNvbGUubG9nKGxvZ1swXS5jb250ZW50KTsKICAgICAgZm9yICh2YXIgaSA9IHRoYXQubG9nQXJyLmxlbmd0aDsgaSA8IGxvZy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoYXQubG9nQXJyLnB1c2gobG9nW2ldLnRpdGxlKTsKICAgICAgICBsZXQgbmV3VGFiTmFtZSA9ICsrdGhhdC50YWJJbmRleCArICIiOwogICAgICAgIHRoYXQuZWRpdGFibGVUYWJzLnB1c2goewogICAgICAgICAgY3VycmVudFBhZ2U6IDEsIC8v5Yid5aeL6aG1CiAgICAgICAgICB0aXRsZTogbG9nW2ldLnRpdGxlLAogICAgICAgICAgbmFtZTogbmV3VGFiTmFtZSwKICAgICAgICAgIGNvbnRlbnQ6IFtdLAogICAgICAgIH0pOwogICAgICAgIHRoYXQuZWRpdGFibGVUYWJzVmFsdWUgPSBuZXdUYWJOYW1lOwogICAgICAgIHRoYXQuaXNDb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgfQogICAgICBmb3IgKGkgPSAwOyBpIDwgbG9nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhhdC5lZGl0YWJsZVRhYnNbaV0uY29udGVudCA9IFtdLmNvbmNhdChsb2dbaV0uY29udGVudCk7CiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGF0LmNvbnRlbnRbaV1bal0pOwogICAgICAgIC8vbG9nW2ldLmNvbnRlbnQgPSBbXTsKICAgICAgfQogICAgfSwgMTAwKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogIH0sCiAgZGVzdHJveWVkKCkgewogICAgLy90aGlzLndlYlNvY2tldC5jbG9zZSgpOyAvL+emu+W8gOi3r+eUseS5i+WQjuaWreW8gHdlYnNvY2tldOi/nuaOpQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gKHNpemUpIHsKICAgICAgdGhpcy5wYWdlc2l6ZSA9IHNpemU7CiAgICAgIC8vY29uc29sZS5sb2coc2l6ZSk7IC8v5q+P6aG15LiL5ouJ5pi+56S65pWw5o2uCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gKGl0ZW0sIGV2ZW50KSB7CiAgICAgIGl0ZW0uY3VycmVudFBhZ2UgPSBldmVudDsgLy/mr4/pobXkuIvmi4nmmL7npLrmlbDmja4KICAgIH0sCiAgICBoYW5kbGVTZWFyY2g6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zZWFyY2ggPSB0aGlzLmlucHV0OwogICAgICAvL2NvbnNvbGUubG9nKHRoaXMudmFsdWUxWzBdLmdldFRpbWUoKSkKICAgIH0sCiAgICBmaWx0ZXJIYW5kbGVyKHZhbHVlLCByb3csIGNvbHVtbikgewogICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsicHJvcGVydHkiXTsKICAgICAgcmV0dXJuIHJvd1twcm9wZXJ0eV0gPT09IHZhbHVlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <!-- 3. 使用组件 -->\n    <!-- 左侧菜单 - 区分文件类型 -->\n    <SideMenu class=\"home-left\"></SideMenu>\n    <!-- 右侧内容区 -->\n    <div class=\"home-right\">\n      <el-empty v-show=\"isConnected\" description=\"连接不到websocket\" class=\"empty\"></el-empty>\n      <el-tabs v-show=\"!isConnected\" v-model=\"editableTabsValue\" type=\"card\">\n        <el-tab-pane\n          v-for=\"item in editableTabs\"\n          :key=\"item.name\"\n          :label=\"item.title\"\n          :name=\"item.name\"\n          align=\"left\"\n        >\n          <el-row>\n            <el-col :span=\"18\">\n              <el-date-picker\n                v-model=\"value1\"\n                unlink-panels\n                size=\"mini\"\n                type=\"daterange\"\n                range-separator=\"至\"\n                start-placeholder=\"开始日期\"\n                end-placeholder=\"结束日期\"\n              >\n              </el-date-picker\n            ></el-col>\n            <el-col :span=\"4\"\n              ><el-input\n                v-model=\"input\"\n                size=\"mini\"\n                placeholder=\"输入关键字搜索\"\n                @change=\"handleSearch(item)\"\n              >\n                <el-button\n                  slot=\"append\"\n                  icon=\"el-icon-search\"\n                  @click=\"handleSearch\"\n                ></el-button> </el-input\n            >\n            </el-col>\n          </el-row>\n          <el-table\n            :data=\"\n              item.content\n                .filter(\n                  (data) =>\n                    !search ||\n                    data.message.toLowerCase().includes(search.toLowerCase())\n                )\n                .filter(\n                  (data) =>\n                    !value1 ||\n                    (new Date(data.date).getTime() - 28800000 >=\n                      value1[0].getTime() &&\n                      new Date(data.date).getTime() - 28800000 <=\n                        value1[1].getTime())\n                )\n                .slice(\n                  (item.currentPage - 1) * pagesize,\n                  item.currentPage * pagesize\n                )\n            \"\n          >\n            <el-table-column\n              prop=\"date\"\n              label=\"日期\"\n              width=\"250\"\n              align=\"center\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"time\"\n              label=\"时间\"\n              width=\"250\"\n              align=\"center\"\n            ></el-table-column\n            ><el-table-column\n              prop=\"file\"\n              label=\"文件\"\n              width=\"200\"\n              align=\"center\"\n            ></el-table-column\n            ><el-table-column\n              prop=\"level\"\n              label=\"类别\"\n              column-key=\"date\"\n              width=\"200\"\n              align=\"center\"\n              :filters=\"[\n                { text: 'info', value: 'info' },\n                { text: 'debug', value: 'debug' },\n                { text: 'warning', value: 'warning' },\n                { text: 'error', value: 'error' },\n              ]\"\n              :filter-method=\"filterHandler\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"message\"\n              label=\"内容\"\n              width=\"400\"\n              align=\"center\"\n            ></el-table-column>\n          </el-table>\n          <el-pagination\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange(item, $event)\"\n            :current-page.sync=\"item.currentPage\"\n            :page-sizes=\"[5, 10, 20, 40]\"\n            :page-size=\"pagesize\"\n            layout=\"total, sizes, prev, pager, next, jumper\"\n            :total=\"\n              item.content\n                .filter(\n                  (data) =>\n                    !search ||\n                    data.message.toLowerCase().includes(search.toLowerCase())\n                )\n                .filter(\n                  (data) =>\n                    !value1 ||\n                    (new Date(data.date).getTime() - 28800000 >=\n                      value1[0].getTime() &&\n                      new Date(data.date).getTime() - 28800000 <=\n                        value1[1].getTime())\n                ).length\n            \"\n            align=\"center\"\n          >\n            //这是显示总共有多少数据\n          </el-pagination>\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SideMenu from \"./SideMenu.vue\"; //  1.引入左侧菜单组件\nexport default {\n  name: \"home\",\n  components: {\n    SideMenu,\n  },\n  data() {\n    return {\n      editableTabsValue: \"0\",\n      editableTabs: [],\n      tabIndex: 0,\n      logArr: [],\n      content: [],\n      timer: \"\",\n      pagesize: 10, //    每页的数据\n      search: \"\",\n      input: \"\",\n      value1: \"\",\n      isConnected: true,\n    };\n  },\n  created() {\n  },\n  mounted() {\n    const that = this;\n    this.timer = setInterval(function () {\n      let log = that.$store.state.log;\n      //console.log(log[0].content);\n      for (var i = that.logArr.length; i < log.length; i++) {\n        that.logArr.push(log[i].title);\n        let newTabName = ++that.tabIndex + \"\";\n        that.editableTabs.push({\n          currentPage: 1, //初始页\n          title: log[i].title,\n          name: newTabName,\n          content: [],\n        });\n        that.editableTabsValue = newTabName;\n        that.isConnected = false;\n      }\n      for (i = 0; i < log.length; i++) {\n        that.editableTabs[i].content = [].concat(log[i].content);\n        //console.log(that.content[i][j]);\n        //log[i].content = [];\n      }\n    }, 100);\n  },\n  beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  destroyed() {\n    //this.webSocket.close(); //离开路由之后断开websocket连接\n  },\n  methods: {\n    handleSizeChange: function (size) {\n      this.pagesize = size;\n      //console.log(size); //每页下拉显示数据\n    },\n    handleCurrentChange: function (item, event) {\n      item.currentPage = event; //每页下拉显示数据\n    },\n    handleSearch: function () {\n      this.search = this.input;\n      //console.log(this.value1[0].getTime())\n    },\n    filterHandler(value, row, column) {\n      const property = column[\"property\"];\n      return row[property] === value;\n    },\n  },\n};\n</script>\n<style lang=\"stylus\" scoped>\n.home {\n  // 使用flex布局 菜单居左固定宽度 右侧内容区域自适应宽度\n  display: flex;\n\n  .home-left {\n    box-sizing: border-box;\n  }\n\n  .home-right {\n    box-sizing: border-box;\n    width: calc(100% - 200px);\n    padding: 8px 24px;\n    flex: 1;\n  }\n\n  .empty{\n    text-align: center;\n    position: absolute;\n    top: 50%;\n    left: 55%;\n    transform: translate(-50%,-55%);\n  }\n}\n</style>\n\n"]}]}