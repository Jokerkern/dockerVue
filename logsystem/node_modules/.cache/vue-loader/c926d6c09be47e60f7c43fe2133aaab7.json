{"remainingRequest":"/home/p/logsystem/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/p/logsystem/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/p/logsystem/src/App.vue","mtime":1641366403353},{"path":"/home/p/logsystem/node_modules/cache-loader/dist/cjs.js","mtime":1641372091064},{"path":"/home/p/logsystem/node_modules/thread-loader/dist/cjs.js","mtime":1641372091064},{"path":"/home/p/logsystem/node_modules/babel-loader/lib/index.js","mtime":1641372092024},{"path":"/home/p/logsystem/node_modules/cache-loader/dist/cjs.js","mtime":1641372091064},{"path":"/home/p/logsystem/node_modules/vue-loader/lib/index.js","mtime":1641372092460}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnYXBwJywKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdlYlNvY2tldDogbnVsbCwKICAgICAgbG9nQXJyOiBbXSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0V2ViU29ja2V0KCk7CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICB0aGlzLndlYlNvY2tldC5jbG9zZSgpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpewogIH0sCiAgY2xvc2UoKSB7CiAgIAogIH0sCiAgbWV0aG9kczogewogICAgaW5pdFdlYlNvY2tldCgpIHsKICAgICAgLy/liJ3lp4vljJZ3ZW9zb2NrZXQKICAgICAgbGV0IGxvY2FsaG9zdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpcF9hZGRyZXNzJyk7CiAgICAgIGxldCBwb3J0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInBvcnQiKTsKICAgICAgY29uc29sZS5sb2cobG9jYWxob3N0LCBwb3J0KTsKICAgICAgdGhpcy53ZWJTb2NrZXQgPSBuZXcgV2ViU29ja2V0KCJ3czovLyIgKyBsb2NhbGhvc3QgKyAiOiIgKyBwb3J0ICsgIiIpOwogICAgICB0aGlzLndlYlNvY2tldC5vbm9wZW4gPSB0aGlzLm9uT3BlbjsKICAgICAgdGhpcy53ZWJTb2NrZXQub25tZXNzYWdlID0gdGhpcy5vbk1lc3NhZ2U7CiAgICAgIHRoaXMud2ViU29ja2V0Lm9uZXJyb3IgPSB0aGlzLm9uRXJyb3I7CiAgICAgIHRoaXMud2ViU29ja2V0Lm9uY2xvc2UgPSB0aGlzLm9uQ2xvc2U7CiAgICB9LAogICAgb25NZXNzYWdlKGV2ZW50KSB7CiAgICAgIHZhciBsb2cgPSB0aGlzLmN1dFN0cmluZyhldmVudCk7CiAgICAgIGlmICghdGhpcy5sb2dBcnIuaW5jbHVkZXMobG9nLmZpbGUpKSB7CiAgICAgICAgdGhpcy5sb2dBcnIucHVzaChsb2cuZmlsZSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VMb2cnLCB7CiAgICAgICAgICB0aXRsZTogbG9nLmZpbGUsCiAgICAgICAgICBjb250ZW50OiBbXSwKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZUZpbGUnLCB7CiAgICAgICAgICB0aXRsZTogbG9nLmZpbGUsCiAgICAgICAgICB0b3RhbDogMCwKICAgICAgICB9KTsKICAgICAgfQogICAgICB2YXIgbG9nSW5kZXggPSB0aGlzLmxvZ0Fyci5pbmRleE9mKGxvZy5maWxlKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VUb3RhbCcpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZUxvZ0NvbnRlbnQnLCB7bG9nSW5kZXg6IGxvZ0luZGV4LCBsb2c6IGxvZ30pOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZUZpbGVUb3RhbCcsIGxvZ0luZGV4KTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VNb250aFRvdGFsJywgbmV3IERhdGUobG9nLmRhdGUpLmdldE1vbnRoKCkpOwogICAgICBzd2l0Y2gobG9nLmxldmVsKSB7CiAgICAgICAgY2FzZSAiZGVidWciOgogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VMZXZlbFRvdGFsJywgMCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJpbmZvIjoKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlTGV2ZWxUb3RhbCcsIDEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAid2FybmluZyI6CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZUxldmVsVG90YWwnLCAyKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImVycm9yIjoKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlTGV2ZWxUb3RhbCcsIDMpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBjdXRTdHJpbmcoZXZlbnQpIHsKICAgICAgdmFyIHN0ciA9IG5ldyBTdHJpbmcoKTsKICAgICAgdmFyIGFyciA9IG5ldyBBcnJheSgpOwogICAgICBzdHIgPSBldmVudC5kYXRhOwogICAgICBhcnIgPSBzdHIuc3BsaXQoIiAiKTsKICAgICAgbGV0IGxlbiA9CiAgICAgICAgYXJyWzBdLmxlbmd0aCArIGFyclsxXS5sZW5ndGggKyBhcnJbMl0ubGVuZ3RoICsgYXJyWzNdLmxlbmd0aCArIDQ7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGF0ZTogYXJyWzBdLnNsaWNlKDEsIGFyclswXS5sZW5ndGgpLAogICAgICAgIHRpbWU6IGFyclsxXS5zbGljZSgwLCBhcnJbMV0ubGVuZ3RoIC0gMSksCiAgICAgICAgZmlsZTogYXJyWzJdLnNsaWNlKDEsIGFyclsyXS5sZW5ndGggLSAxKSwKICAgICAgICBsZXZlbDogYXJyWzNdLnNsaWNlKDEsIGFyclszXS5sZW5ndGggLSAxKSwKICAgICAgICBtZXNzYWdlOiBzdHIuc2xpY2UobGVuKSwKICAgICAgfTsKICAgIH0sCiAgICBvbk9wZW4oKSB7CiAgICAgIGNvbnNvbGUubG9nKCJvcGVuIik7CiAgICB9LAogICAgb25FcnJvcigpIHsKICAgICAgY29uc29sZS5sb2coImVycm9yIik7CiAgICAgIHRoaXMuaW5pdFdlYlNvY2tldCgpOwogICAgfSwKICAgIG9uQ2xvc2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJjbG9zZSIpOwogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    \n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app',\n\n  data() {\n    return {\n      webSocket: null,\n      logArr: [],\n    };\n  },\n  created() {\n    this.initWebSocket();\n  },\n  destroyed() {\n    this.webSocket.close();\n  },\n  beforeDestroy(){\n  },\n  close() {\n   \n  },\n  methods: {\n    initWebSocket() {\n      //初始化weosocket\n      let localhost = localStorage.getItem('ip_address');\n      let port = localStorage.getItem(\"port\");\n      console.log(localhost, port);\n      this.webSocket = new WebSocket(\"ws://\" + localhost + \":\" + port + \"\");\n      this.webSocket.onopen = this.onOpen;\n      this.webSocket.onmessage = this.onMessage;\n      this.webSocket.onerror = this.onError;\n      this.webSocket.onclose = this.onClose;\n    },\n    onMessage(event) {\n      var log = this.cutString(event);\n      if (!this.logArr.includes(log.file)) {\n        this.logArr.push(log.file);\n        this.$store.commit('changeLog', {\n          title: log.file,\n          content: [],\n        });\n        this.$store.commit('changeFile', {\n          title: log.file,\n          total: 0,\n        });\n      }\n      var logIndex = this.logArr.indexOf(log.file);\n      this.$store.commit('changeTotal');\n      this.$store.commit('changeLogContent', {logIndex: logIndex, log: log});\n      this.$store.commit('changeFileTotal', logIndex);\n      this.$store.commit('changeMonthTotal', new Date(log.date).getMonth());\n      switch(log.level) {\n        case \"debug\":\n          this.$store.commit('changeLevelTotal', 0);\n          break;\n        case \"info\":\n          this.$store.commit('changeLevelTotal', 1);\n          break;\n        case \"warning\":\n          this.$store.commit('changeLevelTotal', 2);\n          break;\n        case \"error\":\n          this.$store.commit('changeLevelTotal', 3);\n          break;\n      }\n    },\n    cutString(event) {\n      var str = new String();\n      var arr = new Array();\n      str = event.data;\n      arr = str.split(\" \");\n      let len =\n        arr[0].length + arr[1].length + arr[2].length + arr[3].length + 4;\n      return {\n        date: arr[0].slice(1, arr[0].length),\n        time: arr[1].slice(0, arr[1].length - 1),\n        file: arr[2].slice(1, arr[2].length - 1),\n        level: arr[3].slice(1, arr[3].length - 1),\n        message: str.slice(len),\n      };\n    },\n    onOpen() {\n      console.log(\"open\");\n    },\n    onError() {\n      console.log(\"error\");\n      this.initWebSocket();\n    },\n    onClose() {\n      console.log(\"close\");\n    },\n  },\n}\n</script>"]}]}